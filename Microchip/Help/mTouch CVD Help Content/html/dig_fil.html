<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: Filtering and Decoding Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_getting_started.html">Getting Started</a>      </li>
      <li><a class="el" href="digging.html">Digging into the Framework</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Filtering and Decoding Implementation </h1>  </div>
</div>
<div class="contents">
<p>The filtering and decoding routine of the mTouch CVD Framework executes all of the detection algorithms. Using the latched output from the acquisition module, the <a class="el" href="group__m_touch_a_p_i.html#ga1d7fa7d0b8d4351df46708ddf49401b1" title="Services a new set of results from the acquisition module.">mTouchCVD_Service()</a> function is called each time a new value is available for each sensor (known by checking the <a class="el" href="group__m_touch_a_p_i.html#gaead986ac2d0754d25575559936191d7c" title="Returns a non-zero value when a new set of readings is ready for processing.">mTouchCVD_isDataReady()</a> function). It will then loop through all of the active sensors and determine if they have changed state. If the CVD_DEBUG flag is set to enable the default mTouch CVD communications module, the algorithm will also transmit the latest set of data.</p>
<p>The decode routine implements a baseline average that is only updated while the sensor is in the <a class="el" href="m_touch_c_v_d_8h.html#ab5f3b598c7aa9cfcc773f1a215276ee6a8f938204aaa352ee84e013b9952790af" title="Sensor is currently released.">CVD_RELEASED</a> state. The difference between the sensor's average and its reading is stored in a variable called <code>delta</code> and is compared against the <a class="el" href="group___configuration.html#ga8c11f6ba7531c370675de59c8298c63f" title="Determines the press threshold of sensor 0.">THRESHOLD_PRESS_SENSOR0</a> values (or the equivalent release threshold values) to determine if a change in state is necessary.</p>
<p>While pressed, the system can also begin a counter to automatically release the sensor after a given period of time. This can be implemented using the <a class="el" href="group___configuration.html#ga48635b33a46e1a34669e70287d3434b2" title="Number of press decisions before resetting sensor to released state.">BUTTON_TIMEOUT</a> configuration option.</p>
<p>In some systems when the user releases a sensor other sensors can see a slight negative shift in value. This is the opposite direction of the 'press' shift, so we have included some special options to define how the average updates in these situations. There are also options to change the normal averaging update rate to customize the feel of your sensors. For more information, see the <a class="el" href="group___decoding.html#gaa4b47300c41fcd7e5d3e1ef1b17c7be9" title="Updates the average for the given sensor.">CVD_Filter_UpdateAverage()</a> function.</p>
<p>For more information about the filtering and decoding module, check out these help sections: </p>
<ul>
<li><a class="el" href="group___decoding.html#gac9fbc0448eeb1690da198052177c011f" title="Updates the state of the sensor using the current CVDSensorData value.">CVD_Decode()</a> : Follows the code and clarifies each step of the decoding routine </li>
<li><a class="el" href="cus_service.html">Implementing a Custom Service() Function</a> : Guide to replacing the default mTouch service routine with your own </li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
