<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: mTouch CVD Evaluation Kit Quick Start Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_getting_started.html">Getting Started</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>mTouch CVD Evaluation Kit Quick Start Guide </h1>  </div>
</div>
<div class="contents">
<dl class="note"><dt><b>Note:</b></dt><dd>This guide assumes you are using the mTouch Evaluation kit as your hardware. For details on where to begin when implementing the mTouch framework on a custom hardware design, use <a class="el" href="_getting_started_custom.html">this guide</a>.</dd></dl>
<p>Congratulations for the purchase of your new mTouch CVD Evaluation Kit.</p>
<p>Although the kit will run right out of the box, this document will walk you through the setup process to quickly configure the kit. Should you need any custom configuration, this will get you up and running.</p>
<p>The kit comes pre-programmed and set to operate in the configuration listed below. If you need to alter any of the parameters, then a new hex file will need to be generated and the main board will need to be reprogrammed with the new firmware. MPLAB IDE will then be required as well as a C compiler.</p>
<h2><a class="anchor" id="GSE_DSC"></a>
Default Software Configuration:</h2>
<ul>
<li>Target MCU: <b>PIC16F1937</b>. Possible Values: <a class="el" href="_resource_requirements.html#PICSupport">See here</a> for supported PIC microcontrollers. </li>
<li><a class="el" href="group___configuration.html#ga392407b03210dcc0d87246c8f6911a5b" title="Number of CVD Sensor Inputs.">CVD_NUMBER_SENSORS</a>: <b>7</b>. Possible Values: 1-15 </li>
<li>Sensor/Pin Assignment: <div class="fragment"><pre class="fragment"><span class="preprocessor">   #define CVD_SENSOR0             AN12  </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR1             AN10    </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR2             AN8     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR3             AN9     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR4             AN11     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR5             AN13     </span>
<span class="preprocessor">   #define CVD_SENSOR6             AN4</span>
</pre></div> </li>
<li><a class="el" href="group___configuration.html#gaa95d8aa0b036cfec55969edc8e99b2ea" title="Determines the degree of oversampling and the sample rate of your system.">CVD_SAMPLES_PER_SCAN</a>: <b>50</b>. Possible Values: 1-65535, <a class="el" href="m_touch_c_v_d___config_8h.html#a35eabf6c66531bfa4c1d3ba0d82b083c" title="Precalculated CVD_SAMPLES_PER_SCAN value to achieve ~100ms sample rate.">CVD_100ms_Timing</a>, <a class="el" href="m_touch_c_v_d___config_8h.html#a4436617ad3b0462b50d9f30963da5218" title="Precalculated CVD_SAMPLES_PER_SCAN value to achieve ~20ms sample rate.">CVD_20ms_Timing</a>, <a class="el" href="m_touch_c_v_d___config_8h.html#aaa51f4826ab40c00443967f38bf334e9" title="Precalculated CVD_SAMPLES_PER_SCAN value to achieve ~17ms sample rate.">CVD_17ms_Timing</a> </li>
<li>Press Threshold Values: <div class="fragment"><pre class="fragment"><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR0         1245</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR1         1566</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR2         2021</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR3         1688</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR4         2154</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR5         1466</span>
<span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR6         1783</span>
</pre></div></li>
</ul>
<h2><a class="anchor" id="GSE_CNS"></a>
Changing the Number of Sensors:</h2>
<p>If you need the stack to manage more or less than the default number, all you need to do is update the constant <a class="el" href="group___configuration.html#ga392407b03210dcc0d87246c8f6911a5b" title="Number of CVD Sensor Inputs.">CVD_NUMBER_SENSORS</a> to any other value from 1 to 15. This constant can be found in the <a class="el" href="m_touch_c_v_d___config_8h.html" title="Main mTouch application configuration file.">mTouchCVD_Config.h</a> file.</p>
<h2><a class="anchor" id="GSE_ASI"></a>
Assigning Sensor Indexes to the Correct A/D Channels</h2>
<p>Depending on how the daughter board is connected to the main board, the sensors may be connected to different A/D inputs on the PIC microcontroller. In the mTouch framework, sensors can be mapped to a specific index in the application. Go to <a class="el" href="m_touch_c_v_d___config_8h.html" title="Main mTouch application configuration file.">mTouchCVD_Config.h</a> and look for the section with the definitions shown below, and map the sensor indexes on the left side to the correct A/D channels for your setup. </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">   #define CVD_SENSOR0             AN0  </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR1             AN1    </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR2             AN2     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR3             AN3     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR4             AN4     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR5             AN5     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR6             AN6     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR7             AN7     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR8             AN8     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR9             AN9     </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR10            AN10    </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR11            AN11    </span>
<span class="preprocessor"></span><span class="preprocessor">   #define CVD_SENSOR12            AN12    </span>
<span class="preprocessor">   #define CVD_SENSOR13            AN13</span>
</pre></div><h2><a class="anchor" id="GSE_CAC"></a>
Changing the Number of Samples per Scan</h2>
<p>The number of samples taken in an application will be based on a trade-off between sensitivity and response time. The more samples taken, the better the signal-to-noise ratio of the system, but the slower its response to a finger. Typical response times are less than 100ms to eliminate delay that is visible to the human eye. If a specific response time is required, example equations are provided in the configuration file to show how to calculate the rate that will be chosen based on this value.</p>
<h2><a class="anchor" id="GSE_AST"></a>
Adjusting the Sensor Threshold Values</h2>
<p>Your mTouch evaluation kit comes already preconfigured with the sensor threshold values for the 8-button daughter board. If different sensitivities are needed, go to the <a class="el" href="m_touch_c_v_d___config_8h.html" title="Main mTouch application configuration file.">mTouchCVD_Config.h</a> file, locate the section with the definitions shown below, and set the new values. A general rule of thumb to finding and setting correct values is to determine the range of shift for the sensor (min and max shift) and set the threshold to about 75% of the range. The following formula can be used: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ Threshold_{Press} = min + 0.75 (max - min) \]" src="form_0.png"/>
</p>
 <div class="fragment"><pre class="fragment"><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR0         65         </span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR1         65</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR2         65</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR3         65</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR4         65</span>
<span class="preprocessor"></span><span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR5         65</span>
<span class="preprocessor">   #define THRESHOLD_PRESS_SENSOR6         65</span>
</pre></div> </div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
