<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: mTouch Configuration Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>mTouch Configuration Options</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="member-group"></a>
Required, Basic Configuration Options</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpce3ea8082cd7770b951d89a2bdbc939e"></a> These configuration options must be uniquely set for each application. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga024148e99a7143db044a48216664d03d">_XTAL_FREQ</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The Fosc frequency of your system in Hz.  <a href="#ga024148e99a7143db044a48216664d03d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga6cd6eea2b8230a3c984903a5467fb3f1">TMR0_PRESCALER</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The TMR0 prescaler value of your system.  <a href="#ga6cd6eea2b8230a3c984903a5467fb3f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga392407b03210dcc0d87246c8f6911a5b">CVD_NUMBER_SENSORS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of CVD Sensor Inputs.  <a href="#ga392407b03210dcc0d87246c8f6911a5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#gaf3b51276b26a7e43c3b476ec266e1cec">CVD_SENSOR0</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Analog port assignment for Sensor 0.  <a href="#gaf3b51276b26a7e43c3b476ec266e1cec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#gaa95d8aa0b036cfec55969edc8e99b2ea">CVD_SAMPLES_PER_SCAN</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the degree of oversampling and the sample rate of your system.  <a href="#gaa95d8aa0b036cfec55969edc8e99b2ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga61426a06bb4f06d32e6a83c0fd1917ed">CVD_DEBUG_SPEED</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the output transfer speed of the communications module. Valid options: 9600 (preferred) or 115200.  <a href="#ga61426a06bb4f06d32e6a83c0fd1917ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga0dd566dd4d1d81bbc87b575e6dd3bbd3">CVD_Software_Revision</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to determine what communication protocol to use when sending data to the mTouch GUI. Leave set to 0002.  <a href="#ga0dd566dd4d1d81bbc87b575e6dd3bbd3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Adjusting the Framework's Behavior</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp150be9291f5cd55cd729c6157da8150a"></a> These configuration options will adjust the acquisition and decoding behavior of the mTouch Framework. Editting these values is optional. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga8c11f6ba7531c370675de59c8298c63f">THRESHOLD_PRESS_SENSOR0</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the press threshold of sensor 0.  <a href="#ga8c11f6ba7531c370675de59c8298c63f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga57e7f6eeddfaf77fdc5bd46805993ca2">CVD_SCALING</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">mTouch CVD post-scaler of reading value  <a href="#ga57e7f6eeddfaf77fdc5bd46805993ca2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#gab4760f27d6e1ad23fc25a4b0acdfe1dd">POWER_UP_SAMPLES</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of total scans that should be taken across <b>all sensors</b> before they will be considered initialized.  <a href="#gab4760f27d6e1ad23fc25a4b0acdfe1dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga48635b33a46e1a34669e70287d3434b2">BUTTON_TIMEOUT</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of press decisions before resetting sensor to released state.  <a href="#ga48635b33a46e1a34669e70287d3434b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga3f37fbdded2e4d071681e6b5a9fbe5a4">AVG_UPDATE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the weight given to the raw value when updating the average.  <a href="#ga3f37fbdded2e4d071681e6b5a9fbe5a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga7a39fff044a3cbba3c86554db9bb1781">AVG_RATE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the update rate of the average when unpressed.  <a href="#ga7a39fff044a3cbba3c86554db9bb1781"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#gaa146e0e86d903fe305bf97d0790b2416">RELEASE_THRESHOLD_FACTOR</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the hysteresis relationship between the press and release thresholds.  <a href="#gaa146e0e86d903fe305bf97d0790b2416"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a">CVD_JITTER_TYPE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects between two acquisition jittering implementations.  <a href="#ga5d62d8c1df44ed23c27b7f4d29260a2a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga51e1a7d2f93690b1a16330be275e57ba">DEBOUNCE_COUNT_RELEASE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of consecutive scans a sensor must be decoded as released before changing states.  <a href="#ga51e1a7d2f93690b1a16330be275e57ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga2525a2dbfe277b5eaa4857f1f4a4b657">DEBOUNCE_COUNT_PRESS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of consecutive scans a sensor must be decoded as pressed before changing states.  <a href="#ga2525a2dbfe277b5eaa4857f1f4a4b657"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga61ea789a7c238cc5c94bbdd63b38fbb6">NEGATIVE_CAPACITANCE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the method used to handle a negative capacitance shift on the readings.  <a href="#ga61ea789a7c238cc5c94bbdd63b38fbb6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga1149ef4ad7f0ae481389693b4ef1d60f">CVD_SETTLING_DELAY</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the amount of time provided for the external sensor and internal hold capacitor to balance their voltages during the CVD scanning process.  <a href="#ga1149ef4ad7f0ae481389693b4ef1d60f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga74ff5624949a8a47379e0c214cd4862f">CVD_CHOLD_CHARGE_DELAY</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the amount of time provided for charging the internal hold capacitor of the ADC during the CVD scanning process.  <a href="#ga74ff5624949a8a47379e0c214cd4862f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga61cd0c7d7eb2520709e35da3b848c4fc">CVD_DEBUG_OUTPUT_RAW</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">When defined, the communications module will output raw data in its information packet.  <a href="#ga61cd0c7d7eb2520709e35da3b848c4fc"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Advanced Options - Not recommended except for debugging</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp96333ddc399fae3cbb452d0bedf9e734"></a> These configuration options will adjust a fundamental section of the framework to perform differently. Care should be taken by anyone using these options as they will have a significant effect on the operation and noise performance of the system. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga3cd68ef72f4bfbb1fcd2a897018446f1">AVG_ENABLE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/Disables implementation of a baseline average. Turning this off is highly discouraged.  <a href="#ga3cd68ef72f4bfbb1fcd2a897018446f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga5c0233077efeb779655d30346aa7ad7a">CVD_JITTER_ENABLE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/Disables implementation of the TMR0 jittering feature. Turning this off is highly discouraged due to noise immunity concerns.  <a href="#ga5c0233077efeb779655d30346aa7ad7a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Unimplemented</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpa6122fbac59d9c4f3fd78b12cfe6c5ee"></a> These options are still under development and are not yet implemented. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga04e84da5a71ad0a1e7722652bf88cb45">CVD_DEBUG_PIN</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Not currently implemented.  <a href="#ga04e84da5a71ad0a1e7722652bf88cb45"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#ga46085992d0b7b3d43a62acf99bd3a7c7">CVD_Frame_Revision</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Not currently implemented.  <a href="#ga46085992d0b7b3d43a62acf99bd3a7c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration.html#gae6e6b6583dadc8b40f537e12d90c3163">CVD_Board_Revision</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Not currently implemented.  <a href="#gae6e6b6583dadc8b40f537e12d90c3163"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The mTouch Configuration Options provide an easy way to manipulate the behavior of the framework while staying focused on the end application. Detailed explanations of each option are provided below. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga024148e99a7143db044a48216664d03d"></a><!-- doxytag: member="mTouchCVD_Config.h::_XTAL_FREQ" ref="ga024148e99a7143db044a48216664d03d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _XTAL_FREQ</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The Fosc frequency of your system in Hz. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00069">69</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3cd68ef72f4bfbb1fcd2a897018446f1"></a><!-- doxytag: member="mTouchCVD_Config.h::AVG_ENABLE" ref="ga3cd68ef72f4bfbb1fcd2a897018446f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AVG_ENABLE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enables/Disables implementation of a baseline average. Turning this off is highly discouraged. </p>
<p>Turning this off is <b>highly discouraged</b> unless further editting of the decode logic is going to be performed. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00296">296</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7a39fff044a3cbba3c86554db9bb1781"></a><!-- doxytag: member="mTouchCVD_Config.h::AVG_RATE" ref="ga7a39fff044a3cbba3c86554db9bb1781" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AVG_RATE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the update rate of the average when unpressed. </p>
<p>This value is used to seed a counter variable that will cause the average to be updated only once every Nth new reading value, where N is AVG_RATE.</p>
<p>Example:</p>
<p>If AVG_RATE is 2, the average will use every other new reading to update itself. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00316">316</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3f37fbdded2e4d071681e6b5a9fbe5a4"></a><!-- doxytag: member="mTouchCVD_Config.h::AVG_UPDATE" ref="ga3f37fbdded2e4d071681e6b5a9fbe5a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AVG_UPDATE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the weight given to the raw value when updating the average. </p>
<p>When the average updates itself using a new reading, this value determines what weight is given to the reading variable in the calculation of the new average.</p>
<p>The reading variable will have a weight of 1/AVG_UPDATE in the average calculation.</p>
<p>Example:</p>
<p>If AVG_UPDATE is 4, the average calculation would be: </p>
<div class="fragment"><pre class="fragment"> average = (1/4)*reading + (3/4)*average
</pre></div><p> <b>Allowed Values :: 1, 2, 4, 8, 16</b> </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00303">303</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga48635b33a46e1a34669e70287d3434b2"></a><!-- doxytag: member="mTouchCVD_Config.h::BUTTON_TIMEOUT" ref="ga48635b33a46e1a34669e70287d3434b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUTTON_TIMEOUT</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of press decisions before resetting sensor to released state. </p>
<p>This feature will reset the sensor's state if it remains in the 'pressed' state for too long. This number is based off the amount of time between dataReady flag toggles.</p>
<p>For example:</p>
<p>Let's assume the dataReady flag is set once every 100ms due to the CVD_SAMPLES_PER_SCAN option. If we want a timeout of 10sec, the BUTTON_TIMEOUT value should be set to 100. If we want a timeout of 7.4 seconds, then BUTTON_TIMEOUT should be set to 74.</p>
<div class="fragment"><pre class="fragment"> Timeout Duration = dataReady Toggle Rate * <a class="code" href="group___configuration.html#ga48635b33a46e1a34669e70287d3434b2" title="Number of press decisions before resetting sensor to released state.">BUTTON_TIMEOUT</a> 
</pre></div><p>Setting to '0' or commenting the define will disable the timeout feature.</p>
<p><b>Allowable Range :: [ 0, 2 - 255 ]</b> </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00274">274</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae6e6b6583dadc8b40f537e12d90c3163"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_Board_Revision" ref="gae6e6b6583dadc8b40f537e12d90c3163" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_Board_Revision</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Not currently implemented. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00238">238</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga74ff5624949a8a47379e0c214cd4862f"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_CHOLD_CHARGE_DELAY" ref="ga74ff5624949a8a47379e0c214cd4862f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_CHOLD_CHARGE_DELAY</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the amount of time provided for charging the internal hold capacitor of the ADC during the CVD scanning process. </p>
<p>If this value is <b>too small</b>: There will be noticable crosstalk between closely-indexed sensors that is not related to the hardware layout of the application.<br/>
 If this value is <b>too large</b>: The mTouch ISR will take an unnecessarily long amount of time to execute.<br/>
<br/>
 To correctly set this value: </p>
<ol>
<li>
Set this value to 0, compile and program. </li>
<li>
Look at the raw values on the mTouch GUI or through a terminal program. </li>
<li>
Press as hard as you can on the sensor with the highest amount of capacitance. (This usually corresponds to the sensor with the highest unpressed raw value.) <ul>
<li>
Do you notice a strange crosstalk behavior on a different sensor? If no, leave this value to 0. If yes... </li>
</ul>
</li>
<li>
Increase the delay until the crosstalk behavior is eliminated. </li>
</ol>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00452">452</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga61cd0c7d7eb2520709e35da3b848c4fc"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_DEBUG_OUTPUT_RAW" ref="ga61cd0c7d7eb2520709e35da3b848c4fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DEBUG_OUTPUT_RAW</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>When defined, the communications module will output raw data in its information packet. </p>
<p>If only raw values are output, the packet will be: </p>
<div class="fragment"><pre class="fragment"> SensorStateMask;RawSensor0;RawSensor1;RawSensor2;...;RawSensorN (CR) (LF)
</pre></div><p>If raw and average values are output, the packet will be: </p>
<div class="fragment"><pre class="fragment"> SensorStateMask;RawSensor0;AvgSensor0;RawSensor1;AvgSensor1;...;RawSensorN;AvgSensorN (CR) (LF)
</pre></div><p>See also - CVD_DEBUG_OUTPUT_AVG </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00225">225</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga04e84da5a71ad0a1e7722652bf88cb45"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_DEBUG_PIN" ref="ga04e84da5a71ad0a1e7722652bf88cb45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DEBUG_PIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Not currently implemented. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00221">221</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga61426a06bb4f06d32e6a83c0fd1917ed"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_DEBUG_SPEED" ref="ga61426a06bb4f06d32e6a83c0fd1917ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DEBUG_SPEED</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the output transfer speed of the communications module. Valid options: 9600 (preferred) or 115200. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00220">220</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga46085992d0b7b3d43a62acf99bd3a7c7"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_Frame_Revision" ref="ga46085992d0b7b3d43a62acf99bd3a7c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_Frame_Revision</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Not currently implemented. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00236">236</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5c0233077efeb779655d30346aa7ad7a"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_JITTER_ENABLE" ref="ga5c0233077efeb779655d30346aa7ad7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_JITTER_ENABLE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enables/Disables implementation of the TMR0 jittering feature. Turning this off is highly discouraged due to noise immunity concerns. </p>
<p>The only time you may want to comment this out is if you are looking at the sensor's waveform on a scope. In that case, turning this off will allow you to see a clear waveform. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00340">340</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5d62d8c1df44ed23c27b7f4d29260a2a"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_JITTER_TYPE" ref="ga5d62d8c1df44ed23c27b7f4d29260a2a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_JITTER_TYPE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Selects between two acquisition jittering implementations. </p>
<p>This option will choose between two 'random' seeds for a random number generator that is used to implement the jittering functionality in the acquisition process.</p>
<p><b>Options:</b> </p>
<ul>
<li><b>0</b> - The least significant bits of the ADRESL register are used. This is the smallest and fastest jittering option but may not provide the same amount of randomness that the other option can provide. </li>
<li><b>1</b> - For a slightly higher processing and memory cost, this jittering routine implements a linear feedback shift register to maximize the randomness. Requires one byte of memory and 5 additional instruction cycles to execute. </li>
</ul>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00349">349</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga392407b03210dcc0d87246c8f6911a5b"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_NUMBER_SENSORS" ref="ga392407b03210dcc0d87246c8f6911a5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_NUMBER_SENSORS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of CVD Sensor Inputs. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00073">73</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa95d8aa0b036cfec55969edc8e99b2ea"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_SAMPLES_PER_SCAN" ref="gaa95d8aa0b036cfec55969edc8e99b2ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_SAMPLES_PER_SCAN</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the degree of oversampling and the sample rate of your system. </p>
<p>This is the number of times each sensor will be scanned before asserting the <a class="el" href="m_touch_c_v_d_8h.html#a36c5e2d7bdadd9be1128ef1feb239f0a" title="GLOBAL: Flag to determine if new data is ready for processing.">mTouchCVD_dataReady()</a> bit. If the application requires a specific response time, there are several variables that will be important to the calculation of this parameter.</p>
<ul>
<li>_XTAL_FREQ is the PICs oscillation frequency and will determine how quickly the TMR0 counter will increment.</li>
</ul>
<ul>
<li>TMR0_PRESCALER also determines how quickly the TMR0 counter will increment. This value, located in the OPTION register, is not set by the framework.</li>
</ul>
<ul>
<li>CVD_NUMBER_SENSORS defines how many times the ISR will interrupt between each decrement of the sample counter. The sample counter is initialized with CVD_SAMPLES_PER_SCAN as its value. </li>
</ul>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00123">123</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga57e7f6eeddfaf77fdc5bd46805993ca2"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_SCALING" ref="ga57e7f6eeddfaf77fdc5bd46805993ca2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_SCALING</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>mTouch CVD post-scaler of reading value </p>
<p>This option will determine the amount of post-scaling that is implemented on the acquisition's accumulator register before being stored in the results register. The scaling factor should be set so that it is not possible for the result register to overflow (Max output value is 65535.)</p>
<p>When in doubt, 16 is usually the best option.</p>
<p><b>Options:</b> </p>
<ul>
<li><b>1</b> - No scaling is performed. 1:1 relationship between accumulator and result. </li>
<li><b>16</b> - 16:1 relationship between accumulator and result. </li>
<li><b>256</b> - 256:1 relationship between accumulator and result. </li>
</ul>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00186">186</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf3b51276b26a7e43c3b476ec266e1cec"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_SENSOR0" ref="gaf3b51276b26a7e43c3b476ec266e1cec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_SENSOR0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Analog port assignment for Sensor 0. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00075">75</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1149ef4ad7f0ae481389693b4ef1d60f"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_SETTLING_DELAY" ref="ga1149ef4ad7f0ae481389693b4ef1d60f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_SETTLING_DELAY</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the amount of time provided for the external sensor and internal hold capacitor to balance their voltages during the CVD scanning process. </p>
<p>If this value is <b>too small</b>: The sensors will not be as sensitive as they could be and your sensor's readings will be VDD dependant.<br/>
 If this value is <b>too large</b>: The noise immunity of the system will not be as robust as it could be.<br/>
<br/>
 To correctly set this value: </p>
<ol>
<li>
Set this value to 0, compile and program. </li>
<li>
Look at the raw values on the mTouch GUI or through a terminal program while powering the system at the desired VDD level. </li>
<li>
Adjust VDD by plus and minus 0.5V <ul>
<li>
Do you notice any change in the unpressed value as VDD is changing? If no, leave this value alone. If yes... </li>
</ul>
</li>
<li>
Increase the delay until the sensor's reading no longer changes as VDD changes. </li>
</ol>
<p>Once this has occurred, the settling time has been correctly tuned to provide the maximum amount of sensitivity while minimizing the framework's susceptibility to noise. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00427">427</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0dd566dd4d1d81bbc87b575e6dd3bbd3"></a><!-- doxytag: member="mTouchCVD_Config.h::CVD_Software_Revision" ref="ga0dd566dd4d1d81bbc87b575e6dd3bbd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_Software_Revision</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used to determine what communication protocol to use when sending data to the mTouch GUI. Leave set to 0002. </p>
<p>May also be used to develop your own output data stream and allow for easy toggling between types using this field. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00240">240</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2525a2dbfe277b5eaa4857f1f4a4b657"></a><!-- doxytag: member="mTouchCVD_Config.h::DEBOUNCE_COUNT_PRESS" ref="ga2525a2dbfe277b5eaa4857f1f4a4b657" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBOUNCE_COUNT_PRESS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of consecutive scans a sensor must be decoded as pressed before changing states. </p>
<p>Increasing this value will significantly slow response time, so make sure the scan rate is fast enough to continue to provide the desired response rate. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00377">377</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga51e1a7d2f93690b1a16330be275e57ba"></a><!-- doxytag: member="mTouchCVD_Config.h::DEBOUNCE_COUNT_RELEASE" ref="ga51e1a7d2f93690b1a16330be275e57ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBOUNCE_COUNT_RELEASE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of consecutive scans a sensor must be decoded as released before changing states. </p>
<p>Increasing this value will significantly slow response time, so make sure the scan rate is fast enough to continue to provide the desired response rate. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00370">370</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga61ea789a7c238cc5c94bbdd63b38fbb6"></a><!-- doxytag: member="mTouchCVD_Config.h::NEGATIVE_CAPACITANCE" ref="ga61ea789a7c238cc5c94bbdd63b38fbb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NEGATIVE_CAPACITANCE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the method used to handle a negative capacitance shift on the readings. </p>
<p>This option determines the method used to handle a negative capacitance shift. In other words, how the system will respond to a reading value shift in the opposite direction of a normal shift caused by a finger.</p>
<p>These shifts occur for a variety of reasons and you may want to adjust this behavior based on your system.</p>
<p><b>Options:</b> </p>
<ul>
<li><b>0</b> - Normal Average Behavior<br/>
 (DEFAULT) No special behavior. The average will update at the normal rate, as always. For Metal-over-Capacitive systems, a negative shift usually means a neighboring sensor is being pressed, so this is the best option to keep the current state of the sensor and allow it to be pressed quickly after a neighbor has been pressed. </li>
<li><b>1</b> - Increase Average Speed<br/>
 The average will ignore the AVG_RATE counter and update itself after each new reading value. This has the effect of speeding up the average until it catches up with the negative shift. </li>
<li><b>2</b> - Average Directly Follows Reading<br/>
 The average will instantly follow a negative shift. This behavior is best for a system that needs a very fast response time. It will help prevent quick, repeated presses from being missed due to the average not updating quickly enough. </li>
</ul>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00383">383</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab4760f27d6e1ad23fc25a4b0acdfe1dd"></a><!-- doxytag: member="mTouchCVD_Config.h::POWER_UP_SAMPLES" ref="gab4760f27d6e1ad23fc25a4b0acdfe1dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POWER_UP_SAMPLES</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of total scans that should be taken across <b>all sensors</b> before they will be considered initialized. </p>
<p>For example:</p>
<p>Let's assume the dataReady flag is set once every 100ms due to the CVD_SAMPLES_PER_SCAN option and there are 8 sensors in our system. If we want a 3 second initialization time, we set POWER_UP_SAMPLES to 240.</p>
<p>Allowable Range: 1-65535</p>
<div class="fragment"><pre class="fragment"> Initialization Duration = (dataReady Toggle Rate / <a class="code" href="group___configuration.html#ga392407b03210dcc0d87246c8f6911a5b" title="Number of CVD Sensor Inputs.">CVD_NUMBER_SENSORS</a>) * <a class="code" href="group___configuration.html#gab4760f27d6e1ad23fc25a4b0acdfe1dd" title="Number of total scans that should be taken across all sensors before they will be considered initiali...">POWER_UP_SAMPLES</a>
</pre></div> 
<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00257">257</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa146e0e86d903fe305bf97d0790b2416"></a><!-- doxytag: member="mTouchCVD_Config.h::RELEASE_THRESHOLD_FACTOR" ref="gaa146e0e86d903fe305bf97d0790b2416" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RELEASE_THRESHOLD_FACTOR</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Defines the hysteresis relationship between the press and release thresholds. </p>
<p>RELEASE_THRESHOLD_FACTOR will be multiplied by each of the THRESHOLD_PRESS_SENSOR# values to calculate individual release thresholds for each sensor.</p>
<p>If your system is not releasing quickly enough, make this number slightly larger to raise the threshold. If your system is releasing too quickly, make this number slightly smaller.</p>
<p>For example:</p>
<p>RELEASE_THRESHOLD_FACTOR is 0.5<br/>
 THRESHOLD_PRESS_SENSOR0 is 100.<br/>
 THRESHOLD_PRESS_SENSOR1 is 150.</p>
<div class="fragment"><pre class="fragment"> THRESHOLD_RELEASE_SENSOR0 = <a class="code" href="group___configuration.html#ga8c11f6ba7531c370675de59c8298c63f" title="Determines the press threshold of sensor 0.">THRESHOLD_PRESS_SENSOR0</a> * <a class="code" href="group___configuration.html#gaa146e0e86d903fe305bf97d0790b2416" title="Defines the hysteresis relationship between the press and release thresholds.">RELEASE_THRESHOLD_FACTOR</a>
</pre></div><p>This means the reading on index 0 will need to shift up, during a press, more than 100 counts above the average in order to trigger a press. Once there, the average will stop updating and the sensor will remain in the pressed state until the reading returns to within 50 counts of the average <b>or</b> until the press timeout counter has completed. Likewise, index 1 will need to shift up by 150 and then down to below 75 in order to enter and exit the pressed state. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00325">325</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8c11f6ba7531c370675de59c8298c63f"></a><!-- doxytag: member="mTouchCVD_Config.h::THRESHOLD_PRESS_SENSOR0" ref="ga8c11f6ba7531c370675de59c8298c63f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THRESHOLD_PRESS_SENSOR0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines the press threshold of sensor 0. </p>
<p>This is how far the reading must deviate from the average/baseline before it exits the CVD_RELEASED state and enters the CVD_PRESSED state. The default values are only placeholders and should be edited to fit a design.</p>
<p>The release threshold is automatically calculated off this value and RELEASE_THRESHOLD_FACTOR. This allows this user to focus on where to place a single threshold and the other value will follow it automatically.</p>
<dl class="attention"><dt><b>Attention:</b></dt><dd>To determine this value, it is highly recommended to look at the communications output and see how your sensors are behaving. This is the only way to safely choose a threshold on any new design. </dd></dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00157">157</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6cd6eea2b8230a3c984903a5467fb3f1"></a><!-- doxytag: member="mTouchCVD_Config.h::TMR0_PRESCALER" ref="ga6cd6eea2b8230a3c984903a5467fb3f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMR0_PRESCALER</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The TMR0 prescaler value of your system. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___config_8h_source.html#l00070">70</a> of file <a class="el" href="m_touch_c_v_d___config_8h_source.html">mTouchCVD_Config.h</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
