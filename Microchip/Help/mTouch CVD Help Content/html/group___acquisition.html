<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: mTouch Acquisition Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>mTouch Acquisition Module</h1>  </div>
</div>
<div class="contents">

<p>Generates and executes a configured version of the CVD acquisition routine.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gad587b267db0ec59b0cf961de2aeec4df">GENERATE_JUMP_TABLE</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a jump table in ASM used by the acquisition ISR. Do not use directly.  <a href="#gad587b267db0ec59b0cf961de2aeec4df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga2f31b80a83cab4a91977955a189c7138">GENERATE_STORAGE_FUNCTION</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the storage macro calls for the acquisition ISR. Do not use directly.  <a href="#ga2f31b80a83cab4a91977955a189c7138"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gad587b267db0ec59b0cf961de2aeec4df">GENERATE_JUMP_TABLE</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a jump table in ASM used by the acquisition ISR. Do not use directly.  <a href="#gad587b267db0ec59b0cf961de2aeec4df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga2f31b80a83cab4a91977955a189c7138">GENERATE_STORAGE_FUNCTION</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the storage macro calls for the acquisition ISR. Do not use directly.  <a href="#ga2f31b80a83cab4a91977955a189c7138"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void interrupt&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga15e1bec7c941bb3bf0e0c4b665a322b3">ISR</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">mTouch CVD Framework Interrupt Service Routine  <a href="#ga15e1bec7c941bb3bf0e0c4b665a322b3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
mTouch Acquisition ISR Variables</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd8ec0cfe8287733f0d3c2a715e39ed21"></a> These variables are used by the ISR of the mTouch Framework and should not be directly accessed by the main loop application. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned short long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga62be44cf974eef4f7a333db2d4862830">CVD_Acq_Filtered_Data</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accumulator array for sensor oversampling.  <a href="#ga62be44cf974eef4f7a333db2d4862830"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bank0 unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d">last_result</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores ADC results for differential calculation.  <a href="#gaae872230c60a6e4e2b63d1cf333a750d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bank0 unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga4cffd8d4bb31965666db6134f88dbffd">sample_counter</a> = CVD_SAMPLES_PER_SCAN</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable for oversampling.  <a href="#ga4cffd8d4bb31965666db6134f88dbffd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130">sensor_data</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Decimate-filtered differential ADC result register.  <a href="#ga789fbd8b393b2914790565dfc98ef130"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga6b76084e94aee67c825f8792cbf8979d">CVDSensorData</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Latch register storing the latest acquisition data.  <a href="#ga6b76084e94aee67c825f8792cbf8979d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga2eed528cc091bab8e2c371d14f778f90">mTouchCVD_jitter</a> = 0x55</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the current random seed value for jittering.  <a href="#ga2eed528cc091bab8e2c371d14f778f90"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bank0 unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga4b01622f240a0d4c7bd7fa5ba149617b">current_sensor</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently scanned sensor index value.  <a href="#ga4b01622f240a0d4c7bd7fa5ba149617b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gaf57e5702190e3129a5e620dce0fa9d91">mTouchCVD_dataReady</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">GLOBAL: Flag to determine if new data is ready for processing.  <a href="#gaf57e5702190e3129a5e620dce0fa9d91"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Housekeeping Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd0b611021f27a6ed496e772b10767265"></a> These macros perform basic ISR and timer module functions such as checking that the interrupt flag is set and reloading the TMR0 counter. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga957840a8a5e70bd3b7a6804281b60324">CHECK_AND_CLEAR_TMR0IF</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the TMR0IF and determines whether the mTouch ISR is executed.  <a href="#ga957840a8a5e70bd3b7a6804281b60324"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga4b903b3d0d213c7764d8f9662993c0e6">JITTER_START_TIME</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates a random value and uses it to seed TMR0.  <a href="#ga4b903b3d0d213c7764d8f9662993c0e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gaeca781f3e251960fd79a2bf2b3a2bcb3">WAIT_FOR_GODONE_BIT</a>()&#160;&#160;&#160;while (GO_nDONE);</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements a while loop waiting on the GO/DONE bit to be cleared.  <a href="#gaeca781f3e251960fd79a2bf2b3a2bcb3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga69d67f1f9d5d8a3b229cc8270a3d879a">STORE_LAST_RESULT</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the ADC result into the last_result variable.  <a href="#ga69d67f1f9d5d8a3b229cc8270a3d879a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Timing Critical CVD Scanning Routine Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp919aab1605bdc2eaff80e58b1cfeb6f9"></a> These macros implement the CVD scanning routine and basic acquistion-level filtering techniques. Editting these macros could reduce the noise immunity of the system. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a">READ_SENSOR</a>(indexSensor, indexRef)&#160;&#160;&#160;READ_SENSOR_EXPANDED(__paste(CVD_SELECT_SENSOR,indexSensor),__paste(CVD_SELECT_SENSOR,indexRef),__paste(CVD_PORT_SENSOR,indexSensor),__paste(CVD_PIN_SENSOR,indexSensor),__paste(CVD_PORT_SENSOR,indexRef),__paste(CVD_PIN_SENSOR,indexRef))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a differential CVD scan on the sensor.  <a href="#ga6badcef51035403765b949edad0c5a1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435">READ_SENSOR_EXPANDED</a>(current_channel, ref_channel, port, pin, ref_port, ref_pin)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Expanded utility macro called by <a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a" title="Perform a differential CVD scan on the sensor.">READ_SENSOR()</a>. Do not use directly.  <a href="#ga1a7755ccafb7de81c98706d7efe9e435"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga786cc138a06463104c348791142d74f9">CVD_DECIMATE</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates ASM code to compare the previous sensor's scan result with its slew rate limited latch register, <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a>.  <a href="#ga786cc138a06463104c348791142d74f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga92b0fedcd3a34697cd2bfbdf27b7bb2f">CVD_SENSOR_SMALLER</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates ASM code to decrement the slew rate limited <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register.  <a href="#ga92b0fedcd3a34697cd2bfbdf27b7bb2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga4dcf999d3a56d62519f56bd5af725c85">CVD_DECIMATE_END</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates ASM code to decrement the slew rate limited <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register.  <a href="#ga4dcf999d3a56d62519f56bd5af725c85"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Polishing/Finishing Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpacc1b580f4367c67546fd551b92b246d"></a> These macros perform scaling and final operations before setting the <a class="el" href="group___acquisition.html#gaf57e5702190e3129a5e620dce0fa9d91" title="GLOBAL: Flag to determine if new data is ready for processing.">mTouchCVD_dataReady</a> flag and allowing the main loop application to process the new data. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gac88a7c9b9153686bb1057c0a4353afde">STORE_SENSOR</a>(index)&#160;&#160;&#160;STORE_SENSOR_SCALE(index, 4)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales the accumulated result of the CVD acquisition and stores it for main-application access.  <a href="#gac88a7c9b9153686bb1057c0a4353afde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga94581aa84ed2272bebdd8c3c4cff5d21">EXIT_SENSOR</a>(index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the given index variable and exits the ISR.  <a href="#ga94581aa84ed2272bebdd8c3c4cff5d21"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gae6261e6f98f92dcd8c7eef78a41013a7">EXIT_LAST_SENSOR</a>(index)&#160;&#160;&#160;EXIT_LAST_SENSOR_MAIN()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs several important functions after all sensors have been scanned.  <a href="#gae6261e6f98f92dcd8c7eef78a41013a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gab3d78d729df0cac989171ce366cd31eb">SET_DATA_READY_FLAG</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the dataReady flag to signal the main application of a new reading.  <a href="#gab3d78d729df0cac989171ce366cd31eb"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Housekeeping Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd0b611021f27a6ed496e772b10767265"></a> These macros perform basic ISR and timer module functions such as checking that the interrupt flag is set and reloading the TMR0 counter. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga85fa8655878434d6083b314e053a684d">SAVE_STATE</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes any required actions to save the current main-loop process.  <a href="#ga85fa8655878434d6083b314e053a684d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gaf536d4c7b772add24840d3bf8546ea77">RESTORE_STATE</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes any required actions to save the current main-loop process.  <a href="#gaf536d4c7b772add24840d3bf8546ea77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga957840a8a5e70bd3b7a6804281b60324">CHECK_AND_CLEAR_TMR0IF</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the TMR0IF and determines whether the mTouch ISR is executed.  <a href="#ga957840a8a5e70bd3b7a6804281b60324"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga4b903b3d0d213c7764d8f9662993c0e6">JITTER_START_TIME</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates a random value and uses it to seed TMR0.  <a href="#ga4b903b3d0d213c7764d8f9662993c0e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gaeca781f3e251960fd79a2bf2b3a2bcb3">WAIT_FOR_GODONE_BIT</a>()&#160;&#160;&#160;while (GO_nDONE);</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements a while loop waiting on the GO/DONE bit to be cleared.  <a href="#gaeca781f3e251960fd79a2bf2b3a2bcb3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga69d67f1f9d5d8a3b229cc8270a3d879a">STORE_LAST_RESULT</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the ADC result into the last_result variable.  <a href="#ga69d67f1f9d5d8a3b229cc8270a3d879a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Timing Critical CVD Scanning Routine Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp919aab1605bdc2eaff80e58b1cfeb6f9"></a> These macros implement the CVD scanning routine and basic acquistion-level filtering techniques. Editting these macros could reduce the noise immunity of the system. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a">READ_SENSOR</a>(indexSensor, indexRef)&#160;&#160;&#160;READ_SENSOR_EXPANDED(__paste(CVD_SELECT_SENSOR,indexSensor),__paste(CVD_SELECT_SENSOR,indexRef),__paste(CVD_PORT_SENSOR,indexSensor),__paste(CVD_PIN_SENSOR,indexSensor),__paste(CVD_PORT_SENSOR,indexRef),__paste(CVD_PIN_SENSOR,indexRef))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a differential CVD scan on the sensor.  <a href="#ga6badcef51035403765b949edad0c5a1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435">READ_SENSOR_EXPANDED</a>(current_channel, ref_channel, port, pin, ref_port, ref_pin)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Expanded utility macro called by <a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a" title="Perform a differential CVD scan on the sensor.">READ_SENSOR()</a>. Do not use directly.  <a href="#ga1a7755ccafb7de81c98706d7efe9e435"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga786cc138a06463104c348791142d74f9">CVD_DECIMATE</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates ASM code to compare the previous sensor's scan result with its decimate-filtered latch register, <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a>.  <a href="#ga786cc138a06463104c348791142d74f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga92b0fedcd3a34697cd2bfbdf27b7bb2f">CVD_SENSOR_SMALLER</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates ASM code to decrement the decimate-filtered <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register.  <a href="#ga92b0fedcd3a34697cd2bfbdf27b7bb2f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga4dcf999d3a56d62519f56bd5af725c85">CVD_DECIMATE_END</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates ASM code to decrement the decimate-filtered <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register.  <a href="#ga4dcf999d3a56d62519f56bd5af725c85"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Polishing/Finishing Macros</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpacc1b580f4367c67546fd551b92b246d"></a> These macros perform scaling and final operations before setting the <a class="el" href="group___acquisition.html#gaf57e5702190e3129a5e620dce0fa9d91" title="GLOBAL: Flag to determine if new data is ready for processing.">mTouchCVD_dataReady</a> flag and allowing the main loop application to process the new data. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gac88a7c9b9153686bb1057c0a4353afde">STORE_SENSOR</a>(index)&#160;&#160;&#160;STORE_SENSOR_SCALE(index, 4)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales the accumulated result of the CVD acquisition and stores it for main-application access.  <a href="#gac88a7c9b9153686bb1057c0a4353afde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#ga94581aa84ed2272bebdd8c3c4cff5d21">EXIT_SENSOR</a>(index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the given index variable and exits the ISR.  <a href="#ga94581aa84ed2272bebdd8c3c4cff5d21"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gae6261e6f98f92dcd8c7eef78a41013a7">EXIT_LAST_SENSOR</a>(index)&#160;&#160;&#160;EXIT_LAST_SENSOR_MAIN()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs several important functions after all sensors have been scanned.  <a href="#gae6261e6f98f92dcd8c7eef78a41013a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___acquisition.html#gab3d78d729df0cac989171ce366cd31eb">SET_DATA_READY_FLAG</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the dataReady flag to signal the main application of a new reading.  <a href="#gab3d78d729df0cac989171ce366cd31eb"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Generates and executes a configured version of the CVD acquisition routine. </p>
<p>The mTouch Acquisition module generates an assembly implementation of the interrupt service routine that is designed to maximize noise immunity and minimize execution time. It will automatically add and remove macros as the number of sensors in the application changes. By default, it will use the previously scanned sensor as the reference for the current scan. If the application only has a single sensor, a special acquisition method which does not require a reference sensor is used. This specialized method should not be used in systems with more than one sensor due to crosstalk concerns. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga957840a8a5e70bd3b7a6804281b60324"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::CHECK_AND_CLEAR_TMR0IF" ref="ga957840a8a5e70bd3b7a6804281b60324" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_AND_CLEAR_TMR0IF</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                                        \
    <span class="keywordflow">if</span> (TMR0IF == 0)                                                                        \
    {                              <span class="comment">/* T0IF is not set so,                               */</span>  \
        <span class="keyword">asm</span>(<span class="stringliteral">&quot;ljmp END_ISR&quot;</span>);       <span class="comment">/* exit the mTouch ISR                               */</span>  \
    } <span class="keywordflow">else</span> {                       <span class="comment">/* T0IF is set, so                                   */</span>  \
        TMR0IF = 0;                <span class="comment">/* clear it and continue with mTouch ISR service     */</span>  \
    }                                                                                       \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Checks the TMR0IF and determines whether the mTouch ISR is executed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00126">126</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga957840a8a5e70bd3b7a6804281b60324"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::CHECK_AND_CLEAR_TMR0IF" ref="ga957840a8a5e70bd3b7a6804281b60324" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_AND_CLEAR_TMR0IF</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                                        \
    <span class="keywordflow">if</span> (TMR0IF == 0)                                                                        \
    {                              <span class="comment">/* T0IF is not set so,                               */</span>  \
        <span class="keyword">asm</span>(<span class="stringliteral">&quot;ljmp END_ISR&quot;</span>);       <span class="comment">/* exit the mTouch ISR                               */</span>  \
    } <span class="keywordflow">else</span> {                       <span class="comment">/* T0IF is set, so                                   */</span>  \
        TMR0IF = 0;                <span class="comment">/* clear it and continue with mTouch ISR service     */</span>  \
    }                                                                                       \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Checks the TMR0IF and determines whether the mTouch ISR is executed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00116">116</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga786cc138a06463104c348791142d74f9"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::CVD_DECIMATE" ref="ga786cc138a06463104c348791142d74f9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DECIMATE</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                    \
            <span class="keywordflow">if</span> (<a class="code" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d" title="Stores ADC results for differential calculation.">last_result</a> &gt; <a class="code" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="GLOBAL: Internal mTouch acquisition variable - do not modify.">sensor_data</a>[0]) {                 \
                <a class="code" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="GLOBAL: Internal mTouch acquisition variable - do not modify.">sensor_data</a>[0]++;                               \
            } <span class="keywordflow">else</span> {                                            \
                <a class="code" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="GLOBAL: Internal mTouch acquisition variable - do not modify.">sensor_data</a>[0]--;                               \
            }                                                   \
            <a class="code" href="group___acquisition.html#ga62be44cf974eef4f7a333db2d4862830" title="Accumulator array for sensor oversampling.">CVD_Acq_Filtered_Data</a>[0] += <a class="code" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="GLOBAL: Internal mTouch acquisition variable - do not modify.">sensor_data</a>[0];         \
            <a class="code" href="group___acquisition.html#gaeca781f3e251960fd79a2bf2b3a2bcb3" title="Implements a while loop waiting on the GO/DONE bit to be cleared.">WAIT_FOR_GODONE_BIT</a>();                              \
            <a class="code" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d" title="Stores ADC results for differential calculation.">last_result</a> = (<span class="keywordtype">unsigned</span> int)(ADRESH &lt;&lt; 8) + ADRESL; \
            <span class="keyword">asm</span>(<span class="stringliteral">&quot;return&quot;</span>);                                      \
        } <span class="keywordflow">while</span>(0)
</pre></div>
<p>Generates ASM code to compare the previous sensor's scan result with its slew rate limited latch register, <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00496">496</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga786cc138a06463104c348791142d74f9"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::CVD_DECIMATE" ref="ga786cc138a06463104c348791142d74f9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DECIMATE</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;BANKSEL    _last_result&quot;</span>);                                 \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlw LOW  _sensor_data&quot;</span>);                                 \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _FSR0L&quot;</span>);                                       \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlw HIGH _sensor_data&quot;</span>);                                 \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _FSR0H&quot;</span>);                                       \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _INDF0,W&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;subwf      _last_result,F&quot;</span>);                               \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _FSR0L,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _INDF0,W&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;subwfb     _last_result+1,W&quot;</span>);                             \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;decf       _FSR0L,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;btfss      _STATUS,0&quot;</span>);                                    \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;ljmp       sensor_smaller&quot;</span>);                               \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;iorwf      _last_result,W&quot;</span>);                               \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;btfss      _STATUS,2&quot;</span>);                                    \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlw      1&quot;</span>);                                            \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;addwf      _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _INDF0,W&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _last_result,F&quot;</span>);                               \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _FSR0L,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;btfsc      _STATUS,0&quot;</span>);                                    \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _INDF0,W&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _last_result+1&quot;</span>);                               \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;ljmp       decimate_end&quot;</span>);                                 \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Generates ASM code to compare the previous sensor's scan result with its decimate-filtered latch register, <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00527">527</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4dcf999d3a56d62519f56bd5af725c85"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::CVD_DECIMATE_END" ref="ga4dcf999d3a56d62519f56bd5af725c85" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DECIMATE_END</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates ASM code to decrement the slew rate limited <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00509">509</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4dcf999d3a56d62519f56bd5af725c85"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::CVD_DECIMATE_END" ref="ga4dcf999d3a56d62519f56bd5af725c85" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_DECIMATE_END</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlw LOW  _CVD_Acq_Filtered_Data&quot;</span>);                       \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _FSR0L&quot;</span>);                                       \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlw HIGH _CVD_Acq_Filtered_Data&quot;</span>);                       \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _FSR0H&quot;</span>);                                       \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _last_result,W&quot;</span>);                               \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;addwf      _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _FSR0L,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _last_result+1,W&quot;</span>);                             \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;addwfc     _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _FSR0L,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;btfsc      _STATUS,0&quot;</span>);                                    \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;BANKSEL    _ADCON0&quot;</span>);                                      \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;btfsc    &quot;</span> ___mkstr(<a class="code" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h.html#aaac4d550a256fde5e0bdffdb9fcea842" title="Masks the bank out of the variable address for ASM code usage.">MASKBANK</a>(_ADCON0,1)) <span class="stringliteral">&quot;,1&quot;</span>);            \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;goto       $-1&quot;</span>);                                          \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf     &quot;</span> ___mkstr(<a class="code" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h.html#aaac4d550a256fde5e0bdffdb9fcea842" title="Masks the bank out of the variable address for ASM code usage.">MASKBANK</a>(_ADRESH,1)) <span class="stringliteral">&quot;,W&quot;</span>);            \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;BANKSEL    _last_result&quot;</span>);                                 \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf    &quot;</span> ___mkstr(<a class="code" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h.html#aaac4d550a256fde5e0bdffdb9fcea842" title="Masks the bank out of the variable address for ASM code usage.">MASKBANK</a>(_last_result+1,0)));          \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;BANKSEL    _ADRESL&quot;</span>);                                      \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf     &quot;</span> ___mkstr(<a class="code" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h.html#aaac4d550a256fde5e0bdffdb9fcea842" title="Masks the bank out of the variable address for ASM code usage.">MASKBANK</a>(_ADRESL,1)) <span class="stringliteral">&quot;,W&quot;</span>);            \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;BANKSEL    _last_result&quot;</span>);                                 \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf    &quot;</span> ___mkstr(<a class="code" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h.html#aaac4d550a256fde5e0bdffdb9fcea842" title="Masks the bank out of the variable address for ASM code usage.">MASKBANK</a>(_last_result,0)));            \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;return&quot;</span>);                                                  \
} <span class="keywordflow">while</span>(0)
</pre></div>
<p>Generates ASM code to decrement the decimate-filtered <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00569">569</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga92b0fedcd3a34697cd2bfbdf27b7bb2f"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::CVD_SENSOR_SMALLER" ref="ga92b0fedcd3a34697cd2bfbdf27b7bb2f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_SENSOR_SMALLER</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates ASM code to decrement the slew rate limited <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00508">508</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga92b0fedcd3a34697cd2bfbdf27b7bb2f"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::CVD_SENSOR_SMALLER" ref="ga92b0fedcd3a34697cd2bfbdf27b7bb2f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVD_SENSOR_SMALLER</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlw      1&quot;</span>);                                            \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;subwf      _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _INDF0,W&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _last_result&quot;</span>);                                 \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;incf       _FSR0L,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;btfss      _STATUS,0&quot;</span>);                                    \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;decf       _INDF0,F&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movf       _INDF0,W&quot;</span>);                                     \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;movwf      _last_result+1&quot;</span>);                               \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Generates ASM code to decrement the decimate-filtered <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130" title="Decimate-filtered differential ADC result register.">sensor_data</a> latch register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00556">556</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae6261e6f98f92dcd8c7eef78a41013a7"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::EXIT_LAST_SENSOR" ref="gae6261e6f98f92dcd8c7eef78a41013a7" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_LAST_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td>&#160;&#160;&#160;EXIT_LAST_SENSOR_MAIN()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs several important functions after all sensors have been scanned. </p>
<p>Resets the index variable to 0 for the next scan, decrements the oversampling counter to determine if it is time to complete the sample and store the result, and then exits the ISR. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index variable to reset to 0 </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00631">631</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae6261e6f98f92dcd8c7eef78a41013a7"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::EXIT_LAST_SENSOR" ref="gae6261e6f98f92dcd8c7eef78a41013a7" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_LAST_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td>&#160;&#160;&#160;EXIT_LAST_SENSOR_MAIN()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs several important functions after all sensors have been scanned. </p>
<p>Resets the index variable to 0 for the next scan, decrements the oversampling counter to determine if it is time to complete the sample and store the result, and then exits the ISR. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index variable to reset to 0 </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00716">716</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga94581aa84ed2272bebdd8c3c4cff5d21"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::EXIT_SENSOR" ref="ga94581aa84ed2272bebdd8c3c4cff5d21" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                                                \
    index++;                                                                                        \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;ljmp END_ISR&quot;</span>);                            <span class="comment">/* Exit the ISR                             */</span>  \
} <span class="keywordflow">while</span>(0)
</pre></div>
<p>Increments the given index variable and exits the ISR. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index variable to increment </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00599">599</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga94581aa84ed2272bebdd8c3c4cff5d21"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::EXIT_SENSOR" ref="ga94581aa84ed2272bebdd8c3c4cff5d21" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                                                \
    index++;                                                                                        \
    <span class="keyword">asm</span>(<span class="stringliteral">&quot;ljmp END_ISR&quot;</span>);                            <span class="comment">/* Exit the ISR                             */</span>  \
} <span class="keywordflow">while</span>(0)
</pre></div>
<p>Increments the given index variable and exits the ISR. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index variable to increment </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00684">684</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad587b267db0ec59b0cf961de2aeec4df"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::GENERATE_JUMP_TABLE" ref="gad587b267db0ec59b0cf961de2aeec4df" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GENERATE_JUMP_TABLE</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a jump table in ASM used by the acquisition ISR. Do not use directly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00926">926</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad587b267db0ec59b0cf961de2aeec4df"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::GENERATE_JUMP_TABLE" ref="gad587b267db0ec59b0cf961de2aeec4df" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GENERATE_JUMP_TABLE</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a jump table in ASM used by the acquisition ISR. Do not use directly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l01009">1009</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2f31b80a83cab4a91977955a189c7138"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::GENERATE_STORAGE_FUNCTION" ref="ga2f31b80a83cab4a91977955a189c7138" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GENERATE_STORAGE_FUNCTION</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates the storage macro calls for the acquisition ISR. Do not use directly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l01078">1078</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2f31b80a83cab4a91977955a189c7138"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::GENERATE_STORAGE_FUNCTION" ref="ga2f31b80a83cab4a91977955a189c7138" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GENERATE_STORAGE_FUNCTION</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates the storage macro calls for the acquisition ISR. Do not use directly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00995">995</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4b903b3d0d213c7764d8f9662993c0e6"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::JITTER_START_TIME" ref="ga4b903b3d0d213c7764d8f9662993c0e6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JITTER_START_TIME</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                        \
            <span class="keyword">asm</span>(<span class="stringliteral">&quot;BANKSEL    _TMR0&quot;</span>);    <span class="comment">/* Move to Bank 0 to access TMR0 SFR    */</span>  \
            <span class="keyword">asm</span>(<span class="stringliteral">&quot;clrf       _TMR0&quot;</span>);    <span class="comment">/* Clear TMR0                           */</span>  \
        } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Calculates a random value and uses it to seed TMR0. </p>
<p>The implementation is based on the <a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a" title="Selects between two acquisition jittering implementations.">CVD_JITTER_TYPE</a> configuration option.</p>
<p>If <a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a" title="Selects between two acquisition jittering implementations.">CVD_JITTER_TYPE</a> == 0, the LSb's of the ADRESL register will be used to seed TMR0 with a starting value.</p>
<p>If <a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a" title="Selects between two acquisition jittering implementations.">CVD_JITTER_TYPE</a> == 1, a linear feedback shift register algorithm will be implemented to increase the randomness of the jitter function. This implementation costs an extra byte of ram and a slightly longer execution time. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00178">178</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4b903b3d0d213c7764d8f9662993c0e6"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::JITTER_START_TIME" ref="ga4b903b3d0d213c7764d8f9662993c0e6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JITTER_START_TIME</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                        \
            <span class="keyword">asm</span>(<span class="stringliteral">&quot;movlb      0&quot;</span>      );  <span class="comment">/* Move to Bank 0 to access TMR0 SFR    */</span>  \
            <span class="keyword">asm</span>(<span class="stringliteral">&quot;clrf       _TMR0&quot;</span>  );  <span class="comment">/* Clear TMR0                           */</span>  \
        } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Calculates a random value and uses it to seed TMR0. </p>
<p>The implementation is based on the <a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a" title="Selects between two acquisition jittering implementations.">CVD_JITTER_TYPE</a> configuration option.</p>
<p>If <a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a" title="Selects between two acquisition jittering implementations.">CVD_JITTER_TYPE</a> == 0, the LSb's of the ADRESL register will be used to seed TMR0 with a starting value.</p>
<p>If <a class="el" href="group___configuration.html#ga5d62d8c1df44ed23c27b7f4d29260a2a" title="Selects between two acquisition jittering implementations.">CVD_JITTER_TYPE</a> == 1, a linear feedback shift register algorithm will be implemented to increase the randomness of the jitter function. This implementation costs an extra byte of ram and a slightly longer execution time. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00168">168</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6badcef51035403765b949edad0c5a1a"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::READ_SENSOR" ref="ga6badcef51035403765b949edad0c5a1a" args="(indexSensor, indexRef)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">indexSensor, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">indexRef&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;READ_SENSOR_EXPANDED(__paste(CVD_SELECT_SENSOR,indexSensor),__paste(CVD_SELECT_SENSOR,indexRef),__paste(CVD_PORT_SENSOR,indexSensor),__paste(CVD_PIN_SENSOR,indexSensor),__paste(CVD_PORT_SENSOR,indexRef),__paste(CVD_PIN_SENSOR,indexRef))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform a differential CVD scan on the sensor. </p>
<p>This macro is used to abstract the <a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> macro. This allows us to use 6 arguments in the actual macro implementation, but only 2 are required in the mTouchCVD_Acquisition.c macro call.</p>
<p>This macro will provide the correct ADCON0, Port, and Pin values for the <a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> macro based on the given sensor index. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">indexSensor</td><td>the index of the sensor to be scanned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indexRef</td><td>the index of the sensor to be used as the reference </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00232">232</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6badcef51035403765b949edad0c5a1a"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::READ_SENSOR" ref="ga6badcef51035403765b949edad0c5a1a" args="(indexSensor, indexRef)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">indexSensor, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">indexRef&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;READ_SENSOR_EXPANDED(__paste(CVD_SELECT_SENSOR,indexSensor),__paste(CVD_SELECT_SENSOR,indexRef),__paste(CVD_PORT_SENSOR,indexSensor),__paste(CVD_PIN_SENSOR,indexSensor),__paste(CVD_PORT_SENSOR,indexRef),__paste(CVD_PIN_SENSOR,indexRef))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform a differential CVD scan on the sensor. </p>
<p>This macro is used to abstract the <a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> macro. This allows us to use 6 arguments in the actual macro implementation, but only 2 are required in the mTouchCVD_Acquisition.c macro call.</p>
<p>This macro will provide the correct ADCON0, Port, and Pin values for the <a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> macro based on the given sensor index. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">indexSensor</td><td>the index of the sensor to be scanned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indexRef</td><td>the index of the sensor to be used as the reference </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00222">222</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a7755ccafb7de81c98706d7efe9e435"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::READ_SENSOR_EXPANDED" ref="ga1a7755ccafb7de81c98706d7efe9e435" args="(current_channel, ref_channel, port, pin, ref_port, ref_pin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_SENSOR_EXPANDED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">current_channel, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ref_channel, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pin, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ref_port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ref_pin&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Expanded utility macro called by <a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a" title="Perform a differential CVD scan on the sensor.">READ_SENSOR()</a>. Do not use directly. </p>
<p>This is the full implementation routine for the CVD acquisition. The algorithm steps will changed based on the processor core being used, but the general steps should remain the same:</p>
<h2><a class="anchor" id="ReadSensorExpanded"></a>
Reference-Sensor CVD Scanning Algorithm Steps:</h2>
<p><b>1. Scan A - Sensor High, Reference Low</b> </p>
<ul>
<li>To begin, ADCON0 is set so that the mux will point to the reference sensor. The reference sensor is already output low. </li>
<li>The reference sensor is then set low (just in case) and the sensor to be scanned is set high. </li>
<li>The new ADCON0 value which will point to the scanning sensor is loaded into the working register and a short delay is implemented to allow the internal hold capacitor enough time to discharge. </li>
<li>The sensor's port is set as an input and ADCON0 is immediately loaded with the new mux value. </li>
<li>After a short delay to allow the charges to settle, the Go/Done bit is set to begin the ADC conversion. The sensor port is then set back to an output to minimize noise.</li>
</ul>
<p><b>2. Execute Math while ADC Performs Conversion</b> </p>
<ul>
<li>The <a class="el" href="group___acquisition.html#ga786cc138a06463104c348791142d74f9" title="Generates ASM code to compare the previous sensor&#39;s scan result with its decimate-filtered latch ...">CVD_DECIMATE()</a>, <a class="el" href="group___acquisition.html#ga92b0fedcd3a34697cd2bfbdf27b7bb2f" title="Generates ASM code to decrement the decimate-filtered sensor_data latch register.">CVD_SENSOR_SMALLER()</a>, and <a class="el" href="group___acquisition.html#ga4dcf999d3a56d62519f56bd5af725c85" title="Generates ASM code to decrement the decimate-filtered sensor_data latch register.">CVD_DECIMATE_END()</a> macros are now used to perform calculations based on the previous ISR's results. The result of Scan A is also stored into the last_result variable to later have Scan B's result subtracted from it.</li>
</ul>
<p><b>3. Scan B - Sensor Low, Reference High</b><br/>
 The exact process as Scan A is repeated, but with the voltage levels of the sensor and the reference reversed. </p>
<ul>
<li>ADCON0 mux is set to the reference sensor. </li>
<li>Reference sensor is set to output high, sensor is output low. </li>
<li>After a short delay, sensor is set to an input. </li>
<li>ADCON0 mux is set to the sensor. </li>
<li>After a short settling delay, the Go/Done bit is set. </li>
<li>Sensor is set to an output.</li>
</ul>
<p><b>4. The ISR then exits and stores the ADC result at the start of the next ISR.</b></p>
<h2><a class="anchor" id="ReadSensorExpanded1Sensor"></a>
Single-Sensor CVD Scanning Algorithm Steps:</h2>
<p>Since we are now going to be using the same sensor to charge the internal ADC capacitor and perform our scan, the steps are going to change slightly. The overall, algorithmic process is the same as above, however. First we scan with the internal hold capacitor as a high reference, then we perform math on the previous ISR's result, and then we scan in the opposite direction - internal hold capacitor is low, sensor is high. </p>
<ul>
<li>Sensor is output low to begin </li>
<li>ADCON0 is set to point to the sensor and the Go/Done bit is set. This provides a very small window that allows the internal hold capacitor to gain some charge from the external sensor. Since the Go/Done bit is set at the same time, the internal hold capacitor will be disconnected from the sensor. </li>
<li>The ADCON0 register is then set to point to an isolated, unimplemented ADC channel option and the Go/Done bit is cleared. This stops the conversion that just begin and isolates the now-charged hold capacitor from the sensor. </li>
<li>The sensor is then set output low to remove all charge. </li>
<li>The sensor is set to an input and ADCON0 is set to point to the sensor. </li>
<li>After some settling time, the ADCON0 register then points to an isolated sensor option and begins the conversion.</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_channel</td><td>the ADCON0 value that points to the sensor to be scanned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_channel</td><td>the ADCON0 value that points to the sensor to be used as a reference </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the sensor's port register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>the sensor's pin assignment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_port</td><td>the reference's port register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_pin</td><td>the reference's pin assignment </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00366">366</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1a7755ccafb7de81c98706d7efe9e435"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::READ_SENSOR_EXPANDED" ref="ga1a7755ccafb7de81c98706d7efe9e435" args="(current_channel, ref_channel, port, pin, ref_port, ref_pin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_SENSOR_EXPANDED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">current_channel, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ref_channel, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pin, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ref_port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ref_pin&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Expanded utility macro called by <a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a" title="Perform a differential CVD scan on the sensor.">READ_SENSOR()</a>. Do not use directly. </p>
<p>This is the full implementation routine for the CVD acquisition. The algorithm steps will changed based on the processor core being used, but the general steps should remain the same:</p>
<h2><a class="anchor" id="ReadSensorExpanded"></a>
Reference-Sensor CVD Scanning Algorithm Steps:</h2>
<p><b>1. Scan A - Sensor High, Reference Low</b> </p>
<ul>
<li>To begin, ADCON0 is set so that the mux will point to the reference sensor. The reference sensor is already output low. </li>
<li>The reference sensor is then set low (just in case) and the sensor to be scanned is set high. </li>
<li>The new ADCON0 value which will point to the scanning sensor is loaded into the working register and a short delay is implemented to allow the internal hold capacitor enough time to discharge. </li>
<li>The sensor's port is set as an input and ADCON0 is immediately loaded with the new mux value. </li>
<li>After a short delay to allow the charges to settle, the Go/Done bit is set to begin the ADC conversion. The sensor port is then set back to an output to minimize noise.</li>
</ul>
<p><b>2. Execute Math while ADC Performs Conversion</b> </p>
<ul>
<li>The <a class="el" href="group___acquisition.html#ga786cc138a06463104c348791142d74f9" title="Generates ASM code to compare the previous sensor&#39;s scan result with its slew rate limited latch ...">CVD_DECIMATE()</a>, <a class="el" href="group___acquisition.html#ga92b0fedcd3a34697cd2bfbdf27b7bb2f" title="Generates ASM code to decrement the slew rate limited sensor_data latch register.">CVD_SENSOR_SMALLER()</a>, and <a class="el" href="group___acquisition.html#ga4dcf999d3a56d62519f56bd5af725c85" title="Generates ASM code to decrement the slew rate limited sensor_data latch register.">CVD_DECIMATE_END()</a> macros are now used to perform calculations based on the previous ISR's results. The result of Scan A is also stored into the last_result variable to later have Scan B's result subtracted from it.</li>
</ul>
<p><b>3. Scan B - Sensor Low, Reference High</b><br/>
 The exact process as Scan A is repeated, but with the voltage levels of the sensor and the reference reversed. </p>
<ul>
<li>ADCON0 mux is set to the reference sensor. </li>
<li>Reference sensor is set to output high, sensor is output low. </li>
<li>After a short delay, sensor is set to an input. </li>
<li>ADCON0 mux is set to the sensor. </li>
<li>After a short settling delay, the Go/Done bit is set. </li>
<li>Sensor is set to an output.</li>
</ul>
<p><b>4. The ISR then exits and stores the ADC result at the start of the next ISR.</b></p>
<h2><a class="anchor" id="ReadSensorExpanded1Sensor"></a>
Single-Sensor CVD Scanning Algorithm Steps:</h2>
<p>Since we are now going to be using the same sensor to charge the internal ADC capacitor and perform our scan, the steps are going to change slightly. The overall, algorithmic process is the same as above, however. First we scan with the internal hold capacitor as a high reference, then we perform math on the previous ISR's result, and then we scan in the opposite direction - internal hold capacitor is low, sensor is high. </p>
<ul>
<li>Sensor is output low to begin </li>
<li>ADCON0 is set to point to the sensor and the Go/Done bit is set. This provides a very small window that allows the internal hold capacitor to gain some charge from the external sensor. Since the Go/Done bit is set at the same time, the internal hold capacitor will be disconnected from the sensor. </li>
<li>The ADCON0 register is then set to point to an isolated, unimplemented ADC channel option and the Go/Done bit is cleared. This stops the conversion that just begin and isolates the now-charged hold capacitor from the sensor. </li>
<li>The sensor is then set output low to remove all charge. </li>
<li>The sensor is set to an input and ADCON0 is set to point to the sensor. </li>
<li>After some settling time, the ADCON0 register then points to an isolated sensor option and begins the conversion.</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_channel</td><td>the ADCON0 value that points to the sensor to be scanned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_channel</td><td>the ADCON0 value that points to the sensor to be used as a reference </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the sensor's port register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>the sensor's pin assignment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_port</td><td>the reference's port register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_pin</td><td>the reference's pin assignment </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00358">358</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf536d4c7b772add24840d3bf8546ea77"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::RESTORE_STATE" ref="gaf536d4c7b772add24840d3bf8546ea77" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RESTORE_STATE</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                            \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Executes any required actions to save the current main-loop process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00102">102</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga85fa8655878434d6083b314e053a684d"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::SAVE_STATE" ref="ga85fa8655878434d6083b314e053a684d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAVE_STATE</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                            \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Executes any required actions to save the current main-loop process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00088">88</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab3d78d729df0cac989171ce366cd31eb"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::SET_DATA_READY_FLAG" ref="gab3d78d729df0cac989171ce366cd31eb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_DATA_READY_FLAG</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                \
    <a class="code" href="m_touch_c_v_d_8h.html#a36c5e2d7bdadd9be1128ef1feb239f0a" title="GLOBAL: Flag to determine if new data is ready for processing.">mTouchCVD_dataReady</a> = 1;                                        \
} <span class="keywordflow">while</span>(0)
</pre></div>
<p>Sets the dataReady flag to signal the main application of a new reading. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00652">652</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab3d78d729df0cac989171ce366cd31eb"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::SET_DATA_READY_FLAG" ref="gab3d78d729df0cac989171ce366cd31eb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_DATA_READY_FLAG</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                            \
        <a class="code" href="m_touch_c_v_d_8h.html#a36c5e2d7bdadd9be1128ef1feb239f0a" title="GLOBAL: Flag to determine if new data is ready for processing.">mTouchCVD_dataReady</a> = 1;    \
    } <span class="keywordflow">while</span>(0)
</pre></div>
<p>Sets the dataReady flag to signal the main application of a new reading. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00736">736</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga69d67f1f9d5d8a3b229cc8270a3d879a"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::STORE_LAST_RESULT" ref="ga69d67f1f9d5d8a3b229cc8270a3d879a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STORE_LAST_RESULT</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                            \
    <a class="code" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d" title="Stores ADC results for differential calculation.">last_result</a> = (<span class="keywordtype">unsigned</span> int)((ADRESH | 0x04) &lt;&lt; 8) + ADRESL - <a class="code" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d" title="Stores ADC results for differential calculation.">last_result</a>;  \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Stores the ADC result into the last_result variable. </p>
<p>This macro is called near the beginning of the mTouch ISR to store the previous ADC scan's result. Since this result is from Scan B of the <a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> macro, we subtract the ADRES value from the current last_result value which stores the result from Scan A. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00205">205</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga69d67f1f9d5d8a3b229cc8270a3d879a"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::STORE_LAST_RESULT" ref="ga69d67f1f9d5d8a3b229cc8270a3d879a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STORE_LAST_RESULT</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                            \
    <a class="code" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d" title="Stores ADC results for differential calculation.">last_result</a> = (<span class="keywordtype">unsigned</span> int)((ADRESH | 0x04) &lt;&lt; 8) + ADRESL - <a class="code" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d" title="Stores ADC results for differential calculation.">last_result</a>;  \
} <span class="keywordflow">while</span> (0)
</pre></div>
<p>Stores the ADC result into the last_result variable. </p>
<p>This macro is called near the beginning of the mTouch ISR to store the previous ADC scan's result. Since this result is from Scan B of the <a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> macro, we subtract the ADRES value from the current last_result value which stores the result from Scan A. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00195">195</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac88a7c9b9153686bb1057c0a4353afde"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::STORE_SENSOR" ref="gac88a7c9b9153686bb1057c0a4353afde" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STORE_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td>&#160;&#160;&#160;STORE_SENSOR_SCALE(index, 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scales the accumulated result of the CVD acquisition and stores it for main-application access. </p>
<p>This macro uses the CVD_SCALING configuration option to determine which scaling option to choose. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index of the sensor to be scaled and stored </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00674">674</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac88a7c9b9153686bb1057c0a4353afde"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::STORE_SENSOR" ref="gac88a7c9b9153686bb1057c0a4353afde" args="(index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STORE_SENSOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">index&#160;)</td>
          <td>&#160;&#160;&#160;STORE_SENSOR_SCALE(index, 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scales the accumulated result of the CVD acquisition and stores it for main-application access. </p>
<p>This macro uses the CVD_SCALING configuration option to determine which scaling option to choose. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the index of the sensor to be scaled and stored </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00589">589</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaeca781f3e251960fd79a2bf2b3a2bcb3"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F1.h::WAIT_FOR_GODONE_BIT" ref="gaeca781f3e251960fd79a2bf2b3a2bcb3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAIT_FOR_GODONE_BIT</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td>&#160;&#160;&#160;while (GO_nDONE);</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements a while loop waiting on the GO/DONE bit to be cleared. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html#l00181">181</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f1_8h_source.html">mTouchCVD_macroLibrary_PIC16F1.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaeca781f3e251960fd79a2bf2b3a2bcb3"></a><!-- doxytag: member="mTouchCVD_macroLibrary_PIC16F.h::WAIT_FOR_GODONE_BIT" ref="gaeca781f3e251960fd79a2bf2b3a2bcb3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAIT_FOR_GODONE_BIT</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td>&#160;&#160;&#160;while (GO_nDONE);</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements a while loop waiting on the GO/DONE bit to be cleared. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html#l00191">191</a> of file <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h_source.html">mTouchCVD_macroLibrary_PIC16F.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga15e1bec7c941bb3bf0e0c4b665a322b3"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::ISR" ref="ga15e1bec7c941bb3bf0e0c4b665a322b3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void interrupt ISR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>mTouch CVD Framework Interrupt Service Routine </p>
<p>Implements the acquisition process for the mTouch CVD Framework. Adding code to the beginning of this function could significantly affect the noise performance of your final system. To avoid complications, add any necessary ISR functionality to the end of the ISR - after the mTouch scanning process is complete. Be careful that you are leaving enough time outside of the ISR to process the main line application. </p>

<p><h2><a class="anchor" id="AcqImp"></a>
Algorithm Implementation Notes</h2>
<p>1. If required, save the current state of the main loop application.</p>
<p>2. Check and clear the TMR0IF flag. If it has not been set, jump to END_ISR.</p>
<p>3. Reload TMR0 with a jittered reload value to prepare for the next mTouch scan after this one.</p>
<p>4. Check that the Go/Done bit of the ADC has been cleared.</p>
<p>5. Store the result of the previous sensor's ADC scan by subtracting it from the value stored in last_result. This creates the 'differential' value that will be accumulated in the next step.</p>
<p>6. Implement and use a jump table based on which sensor should be scanned next.</p>
<p>6. Generate the correct macro functions to implement the mTouch CVD scanning algorithms. This step uses the number of sensors to implement a 'previous sensor used as the reference sensor' configuration. The last sensor uses the <a class="el" href="group___acquisition.html#gae6261e6f98f92dcd8c7eef78a41013a7" title="Performs several important functions after all sensors have been scanned.">EXIT_LAST_SENSOR()</a> macro instead of the <a class="el" href="group___acquisition.html#ga94581aa84ed2272bebdd8c3c4cff5d21" title="Increments the given index variable and exits the ISR.">EXIT_SENSOR()</a> macro. This allows the storage function to be performed instead of immediately moving to the END_ISR label.</p>
<p>8. Uses the number of sensors to generate a storage macro for each sensor. This step is only reached after a decrementing counter, initialized to <a class="el" href="group___configuration.html#gaa95d8aa0b036cfec55969edc8e99b2ea" title="Determines the degree of oversampling and the sample rate of your system.">CVD_SAMPLES_PER_SCAN</a>, reaches 0.</p>
<p>9. Sets the mTouchCVD_dataReady flag so the main application knows to process the new data.</p>
<p><br/>
<br/>
<br/>
</p>
<p>10. Sets the mTouchCVD_dataReady flag so the main application knows to process the new data.</p>
<h2><a class="anchor" id="AcqEndISR"></a>
Adding Additional ISR Checks and Functionality</h2>
<p>END_ISR is the place the mTouchCVD_ISR will jump to when its finished performing its service.</p>
<p>Add additional application ISR functions/checks above the <a class="el" href="m_touch_c_v_d__macro_library___p_i_c16_f_8h.html#af536d4c7b772add24840d3bf8546ea77">RESTORE_STATE()</a> macro. You may program in C.</p>
<p><br/>
<br/>
<br/>
</p>
<h2><a class="anchor" id="AcqDec"></a>
Decimation Helper Function</h2>
<p>The 'decimate' function is used in each of the <a class="el" href="group___acquisition.html#ga6badcef51035403765b949edad0c5a1a" title="Perform a differential CVD scan on the sensor.">READ_SENSOR()</a> calls to perform some common math calculations on the previous sensor scan's result. It has been implemented as a macro to allow for different implementations based on the chosen PIC microcontroller's core.</p>
<p><br/>
<br/>
<br/>
 </p>
</p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00117">117</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga4b01622f240a0d4c7bd7fa5ba149617b"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::current_sensor" ref="ga4b01622f240a0d4c7bd7fa5ba149617b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bank0 unsigned char <a class="el" href="group___acquisition.html#ga4b01622f240a0d4c7bd7fa5ba149617b">current_sensor</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Currently scanned sensor index value. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00088">88</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga62be44cf974eef4f7a333db2d4862830"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::CVD_Acq_Filtered_Data" ref="ga62be44cf974eef4f7a333db2d4862830" args="[CVD_NUMBER_SENSORS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short long <a class="el" href="group___acquisition.html#ga62be44cf974eef4f7a333db2d4862830">CVD_Acq_Filtered_Data</a>[CVD_NUMBER_SENSORS]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accumulator array for sensor oversampling. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00076">76</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga6b76084e94aee67c825f8792cbf8979d"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::CVDSensorData" ref="ga6b76084e94aee67c825f8792cbf8979d" args="[CVD_NUMBER_SENSORS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="group___acquisition.html#ga6b76084e94aee67c825f8792cbf8979d">CVDSensorData</a>[CVD_NUMBER_SENSORS]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Latch register storing the latest acquisition data. </p>
<p>GLOBAL: Latch register storing the latest acquisition data. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00082">82</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaae872230c60a6e4e2b63d1cf333a750d"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::last_result" ref="gaae872230c60a6e4e2b63d1cf333a750d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bank0 unsigned int <a class="el" href="group___acquisition.html#gaae872230c60a6e4e2b63d1cf333a750d">last_result</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores ADC results for differential calculation. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00077">77</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaf57e5702190e3129a5e620dce0fa9d91"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::mTouchCVD_dataReady" ref="gaf57e5702190e3129a5e620dce0fa9d91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="group___acquisition.html#gaf57e5702190e3129a5e620dce0fa9d91">mTouchCVD_dataReady</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>GLOBAL: Flag to determine if new data is ready for processing. </p>
<p>Flag to register new sensor values.</p>
<p>Example usage: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordflow">while</span>(1)
 {
   <span class="keywordflow">if</span> (<a class="code" href="group__m_touch_a_p_i.html#gaead986ac2d0754d25575559936191d7c" title="Returns a non-zero value when a new set of readings is ready for processing.">mTouchCVD_isDataReady</a>())   <span class="comment">// Is new information ready?</span>
   {
      <a class="code" href="group__m_touch_a_p_i.html#ga1d7fa7d0b8d4351df46708ddf49401b1" title="Services a new set of results from the acquisition module.">mTouchCVD_Service</a>();        <span class="comment">// Decode the newly captured data and transmit new data updates.</span>
   }
 }
</pre></div> 
<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00080">80</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga2eed528cc091bab8e2c371d14f778f90"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::mTouchCVD_jitter" ref="ga2eed528cc091bab8e2c371d14f778f90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="group___acquisition.html#ga2eed528cc091bab8e2c371d14f778f90">mTouchCVD_jitter</a> = 0x55</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores the current random seed value for jittering. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00085">85</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4cffd8d4bb31965666db6134f88dbffd"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::sample_counter" ref="ga4cffd8d4bb31965666db6134f88dbffd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bank0 unsigned int <a class="el" href="group___acquisition.html#ga4cffd8d4bb31965666db6134f88dbffd">sample_counter</a> = CVD_SAMPLES_PER_SCAN</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Counter variable for oversampling. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00078">78</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga789fbd8b393b2914790565dfc98ef130"></a><!-- doxytag: member="mTouchCVD_Acquistion.c::sensor_data" ref="ga789fbd8b393b2914790565dfc98ef130" args="[CVD_NUMBER_SENSORS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="group___acquisition.html#ga789fbd8b393b2914790565dfc98ef130">sensor_data</a>[CVD_NUMBER_SENSORS]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decimate-filtered differential ADC result register. </p>
<p>GLOBAL: Internal mTouch acquisition variable - do not modify. </p>

<p>Definition at line <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html#l00081">81</a> of file <a class="el" href="m_touch_c_v_d___acquistion_8c_source.html">mTouchCVD_Acquistion.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
