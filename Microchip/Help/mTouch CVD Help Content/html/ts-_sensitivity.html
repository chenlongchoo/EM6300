<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: Increasing Sensitivity - Troubleshooting the Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_troubleshoot.html">Troubleshooting the Framework</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Increasing Sensitivity - Troubleshooting the Framework </h1>  </div>
</div>
<div class="contents">
<ul>
<li><b>1. Make sure your application's CVD waveform is correct.</b><br/>
<br/>
 See the <a class="el" href="ts-_waveform.html">Waveform Troubleshooting guide</a> for help with this process.</li>
</ul>
<p><br/>
</p>
<ul>
<li><b>2. Use <a class="el" href="group___configuration.html#gaa95d8aa0b036cfec55969edc8e99b2ea" title="Determines the degree of oversampling and the sample rate of your system.">CVD_SAMPLES_PER_SCAN</a> to increase the amount of oversampling.</b><br/>
<br/>
 All applications will want to oversample at least 8 times to ensure random noise cannot significantly affect the sensor's reading.<br/>
 <br/>
 Most applications oversample between 30-50 times.<br/>
 <br/>
 The diminishing returns on sensitivity when increasing this value occur at an exponential rate. This means there is only a small difference at 70 and 80 samples, while there is a very large difference between 10 and 20 samples.</li>
</ul>
<p><br/>
</p>
<ul>
<li><b>3. Change <a class="el" href="group___configuration.html#ga57e7f6eeddfaf77fdc5bd46805993ca2" title="mTouch CVD post-scaler of reading value">CVD_SCALING</a> to 1 to eliminate resolution loss.</b><br/>
<br/>
 When the acquisition module has oversampled <a class="el" href="group___configuration.html#gaa95d8aa0b036cfec55969edc8e99b2ea" title="Determines the degree of oversampling and the sample rate of your system.">CVD_SAMPLES_PER_SCAN</a> number of times, the final sum must be moved from a 24-bit array to a 16-bit array. The reading value cannot be allowed to exceed the 16-bit limit of 65535. To prevent this from occuring, the framework will use <a class="el" href="group___configuration.html#ga57e7f6eeddfaf77fdc5bd46805993ca2" title="mTouch CVD post-scaler of reading value">CVD_SCALING</a> to determine what to divide the accumulation register by. This results in a slight loss in resolution. If this is a concern for your application, setting <a class="el" href="group___configuration.html#ga57e7f6eeddfaf77fdc5bd46805993ca2" title="mTouch CVD post-scaler of reading value">CVD_SCALING</a> value to 1 will eliminate this step.<br/>
 <br/>
 It is your responsibility to ensure the CVD's reading cannot exceed 65535.</li>
</ul>
<p><br/>
</p>
<ul>
<li><b>4. Check that the average is not becoming corrupted.</b><br/>
<br/>
 If your average is updating too quickly, you may be losing some sensitivity because the average is no longer equal to the sensor's unpressed value. To check this, uncomment CVD_DEBUG_OUTPUT_AVG in the configuration file and view the average in real time with the reading.<br/>
 <br/>
 If the average is updating too quickly, you can slow it down by increasing the value of <a class="el" href="group___configuration.html#ga3f37fbdded2e4d071681e6b5a9fbe5a4" title="Determines the weight given to the raw value when updating the average.">AVG_UPDATE</a> and <a class="el" href="group___configuration.html#ga7a39fff044a3cbba3c86554db9bb1781" title="Sets the update rate of the average when unpressed.">AVG_RATE</a>.<br/>
 <br/>
 If the average is becoming corrupted due to fast tapping on the sensor, use the <a class="el" href="group___configuration.html#ga61ea789a7c238cc5c94bbdd63b38fbb6" title="Determines the method used to handle a negative capacitance shift on the readings.">NEGATIVE_CAPACITANCE</a> configuration option to adjust how the average behaves when the reading has fallen below the average. For fast-tapping systems, setting this value to 1 is recommended. Using the '2' value for this option is only recommended for systems that are not going to have any noise spikes.</li>
</ul>
<p><br/>
</p>
<ul>
<li><b>5. Decrease the amount of parasitic capacitance affecting the sensor and its trace.</b><br/>
<br/>
 The amount of parasitic capacitance on the sensor will directly impact its maximum level of sensitivity. Eliminate ground planes near your sensor and make sure its trace path is not running near any high-current or digital lines. This is particularly important for proximity sensors and normal touch sensors with long traces. </li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
