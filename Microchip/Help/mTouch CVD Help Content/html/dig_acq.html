<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: Acquisition Method and Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_getting_started.html">Getting Started</a>      </li>
      <li><a class="el" href="digging.html">Digging into the Framework</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Acquisition Method and Implementation </h1>  </div>
</div>
<div class="contents">
<p>The acquisition routine of the mTouch CVD Framework is implemented using a library of macro functions that implement the process in assembly. This ensures we achieve an efficient, time-specific algorithm that can be both customizable and robust to external noise. This code is not intended to be touched by the end user. Any edits to this code could result in the loss of noise immunity.</p>
<p>As shown below, the acquisition routine performs two ADC scans. The difference between these two scans is then used to update a decimate-filtered result register. This register is only allowed to update by one count in either the up or down direction. So, for example, you must update this register 100 times to move its result 100 counts. This is done to remove high-frequency impulse noise from the signal.</p>
<p>The decimate-filtered result is then thrown into an accumulator so the shifts can be oversampled. Once it has oversampled CVD_SCANS_PER_SENSOR number of times, the value of the accumulator is scaled so it will fit in a 16-bit integer and then stored into one final, latched result array that can be accessed using the <a class="el" href="m_touch_c_v_d_8h.html#a266898ac8fe1cc86038bbd1ec8c4ca8d" title="Abstraction macro for array access.">CVDGetSensor(i)</a> macro.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>You should never try to access the arrays in the mTouchCVD_Acquisition.c file. If you do, however, you will find the index values are shifted from what you would expect. Sensor0's data is stored in Sensor1's array locations. SensorN is stored in Sensor0's array location. This index shifting is corrected in the storage macro and so it is invisible to anything outside of the mTouch ISR.</dd></dl>
<p>For more information about the acquistion module, check out these help sections: </p>
<ul>
<li><a class="el" href="group___acquisition.html#ga15e1bec7c941bb3bf0e0c4b665a322b3" title="mTouch CVD Framework Interrupt Service Routine">ISR()</a> : Follows the code and clarifies each step of the mTouch ISR </li>
<li><a class="el" href="group___acquisition.html#ga1a7755ccafb7de81c98706d7efe9e435" title="Expanded utility macro called by READ_SENSOR(). Do not use directly.">READ_SENSOR_EXPANDED()</a> : Step-by-step explanation of the CVD scanning routine</li>
</ul>
<div align="center">
<img src="acquisitionBlock.jpg" alt="acquisitionBlock.jpg"/>
</div>
 </div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
