<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch CVD Framework: mTouchCVD.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>mTouchCVD.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>This module provides a group of functions performing the post acquisition filtering and decoding for all the sensors.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="m_touch_c_v_d_8h_source.html">includes/mTouchCVD.h</a>&quot;</code><br/>
<!-- startSectionHeader --><div class="dynheader">
Include dependency graph for mTouchCVD.c:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="m_touch_c_v_d_8c__incl.png" border="0" usemap="#m_touch_c_v_d_8c" alt=""/></div>
<map name="m_touch_c_v_d_8c" id="m_touch_c_v_d_8c">
<area shape="rect" id="node3" href="m_touch_c_v_d_8h.html" title="Main framework header file used by all mTouchCVD files." alt="" coords="101,83,259,112"/><area shape="rect" id="node7" href="m_touch_c_v_d___config_8h.html" title="Main mTouch application configuration file." alt="" coords="80,160,280,189"/><area shape="rect" id="node9" href="m_touch_c_v_d__process_configuration_8h.html" title="Internal framework header file performing many pre&#45;compiler checks." alt="" coords="304,160,589,189"/></map>
<!-- endSectionContent --></div>

<p><a href="m_touch_c_v_d_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m_touch_c_v_d_8c.html#a4929f20a3e3692690545ed671082bd8a">CVD_Filter_Init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the filtering variables.  <a href="#a4929f20a3e3692690545ed671082bd8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#gac9fbc0448eeb1690da198052177c011f">CVD_Decode</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the state of the sensor using the current CVDSensorData value.  <a href="group___decoding.html#gac9fbc0448eeb1690da198052177c011f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#gaa4b47300c41fcd7e5d3e1ef1b17c7be9">CVD_Filter_UpdateAverage</a> (unsigned int reading, unsigned char index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the average for the given sensor.  <a href="group___decoding.html#gaa4b47300c41fcd7e5d3e1ef1b17c7be9"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Required Initialization Call</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>This function must be called at power up in order to correctly configure the mTouch framework. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__m_touch_a_p_i.html#gaed3afe88efb9865846aabe3520633515">mTouchCVD_Init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the mTouch CVD firmware.  <a href="group__m_touch_a_p_i.html#gaed3afe88efb9865846aabe3520633515"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Global Sensor Variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These variables store information about the current state of the sensors. They should only ever be updated by the mTouch framework, but may be read globally so that special actions can be taken based on the sensors' status. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#ga96682ce4519447c786435adf2a9773fd">ButtonState</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks the current state of each sensor.  <a href="group___decoding.html#ga96682ce4519447c786435adf2a9773fd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#gaa9938774508fb5006a03ae927ceab281">Average</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks environmental changes in the system.  <a href="group___decoding.html#gaa9938774508fb5006a03ae927ceab281"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Local Variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These variables are used internally by the filtering and decoding framework modules. They should never be accessed outside of the <a class="el" href="m_touch_c_v_d_8c.html" title="This module provides a group of functions performing the post acquisition filtering and decoding for ...">mTouchCVD.c</a> file. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#gaf4a95d7a14fc1ac0878ab548ce171df8">AverageCount</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable for updating averages.  <a href="group___decoding.html#gaf4a95d7a14fc1ac0878ab548ce171df8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#gaea65c75b53a7991a2749b65c70016a5e">PressTimer</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable for button timeout implementation.  <a href="group___decoding.html#gaea65c75b53a7991a2749b65c70016a5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#ga1961c12259ea75cbe4402c1c35ee2c29">DebounceCount</a> [CVD_NUMBER_SENSORS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable for state transition debouncing.  <a href="group___decoding.html#ga1961c12259ea75cbe4402c1c35ee2c29"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#ga2274f35a97c64eadb7a5701ae063c60b">initCounter</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable for initialization.  <a href="group___decoding.html#ga2274f35a97c64eadb7a5701ae063c60b"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constant Threshold Arrays</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These arrays are stored in program memory at compile time, so they do not require RAM. The downside to this implementation is that their values cannot be updated at runtime. If this is something your application requires, further editing will be needed. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#ga368975e6990e7c54f6afe3f04bbaa4e6">pressThreshold</a> [] = PRESS_THRESHOLD_INIT</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant array containing the press thresholds.  <a href="group___decoding.html#ga368975e6990e7c54f6afe3f04bbaa4e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#ga8338590d8fd2faa851ead1630de0a0df">releaseThreshold</a> [] = RELEASE_THRESHOLD_INIT</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant array containing the release thresholds.  <a href="group___decoding.html#ga8338590d8fd2faa851ead1630de0a0df"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This module provides a group of functions performing the post acquisition filtering and decoding for all the sensors. </p>

<p>Definition in file <a class="el" href="m_touch_c_v_d_8c_source.html">mTouchCVD.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4929f20a3e3692690545ed671082bd8a"></a><!-- doxytag: member="mTouchCVD.c::CVD_Filter_Init" ref="a4929f20a3e3692690545ed671082bd8a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CVD_Filter_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the filtering variables. </p>
<p>The CVD filtering module's initialization routine initializes the filtering variables. </p>

<p><h2><a class="anchor" id="FilterInit"></a>
Algorithm Implementation Notes</h2>
<p>1. Loop through all sensors and initialize array variables</p>
<p><br/>
<br/>
<br/>
 </p>
</p>

<p>Definition at line <a class="el" href="m_touch_c_v_d_8c_source.html#l00190">190</a> of file <a class="el" href="m_touch_c_v_d_8c_source.html">mTouchCVD.c</a>.</p>

<p><!-- startSectionHeader --><div class="dynheader">
Here is the caller graph for this function:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="m_touch_c_v_d_8c_a4929f20a3e3692690545ed671082bd8a_icgraph.png" border="0" usemap="#m_touch_c_v_d_8c_a4929f20a3e3692690545ed671082bd8a_icgraph" alt=""/></div>
<map name="m_touch_c_v_d_8c_a4929f20a3e3692690545ed671082bd8a_icgraph" id="m_touch_c_v_d_8c_a4929f20a3e3692690545ed671082bd8a_icgraph">
<area shape="rect" id="node3" href="group__m_touch_a_p_i.html#gaed3afe88efb9865846aabe3520633515" title="Initializes the mTouch CVD firmware." alt="" coords="164,5,281,35"/></map>
<!-- endSectionContent --></div>
</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>mTouch CVD Framework v1.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
